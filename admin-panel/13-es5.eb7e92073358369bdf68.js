function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"1bnl":function(e,t,a){"use strict";a.r(t),a.d(t,"PickupManagementModule",(function(){return _e}));var i,r=a("ofXK"),n=a("tyNb"),o=a("fXoL"),c=a("mrSG"),l=a("M9IT"),d=a("+0xr"),s=a("VfN6"),b=a("3Pt+"),u=a("0IaG"),m=a("UJjo"),p=a("Olgc"),f=a("aR35"),g=a("lJxs"),v=a("tk/3"),h=((i=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getAllPickups",value:function(){return this.http.get(f.e.PICKUP.PICKUP).pipe(Object(g.a)((function(e){var t=[];return e.success&&(t=e.data),t})))}},{key:"addPickup",value:function(e){return this.http.post(f.e.PICKUP.PICKUP_CREATE,e)}},{key:"assignPickup",value:function(e){return this.http.post(f.e.PICKUP.PICKUP_ASSIGN,e)}}]),e}()).\u0275fac=function(e){return new(e||i)(o.cc(v.b))},i.\u0275prov=o.Ob({token:i,factory:i.\u0275fac,providedIn:"root"}),i),_=a("pxUr"),y=a("r1eF"),X=a("SIeF"),Y=a("Wp6s"),S=a("kmnG"),C=a("qFsG"),k=a("NFeN"),G=a("d3UM"),P=a("pJxS"),E=a("bTqV"),R=a("FKr1"),w=["searchSender"],x=["searchReceiver"];function T(e,t){if(1&e&&(o.Yb(0,"mat-option",38),o.Gc(1),o.Xb()),2&e){var a=t.$implicit;o.qc("value",a),o.Gb(1),o.Ic(" ",a," ")}}function I(e,t){if(1&e&&(o.Yb(0,"mat-option",38),o.Gc(1),o.Xb()),2&e){var a=t.$implicit;o.qc("value",a),o.Gb(1),o.Ic(" ",a," ")}}var D,N=((D=function(){function e(t,a,i,r,n,o,c){_classCallCheck(this,e),this.dialogRef=t,this._formBuilder=a,this._ProgressBarService=i,this._ToastService=r,this._PickupService=n,this.mapsAPILoader=o,this.ngZone=c,this.paymentMethods=["COD","ONLINE"],this.payerTypes=["SENDER","RECEIVER"]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.createForm(),this.mapsAPILoader.load().then((function(){e.setCurrentLocation(),e.geoCoder=new google.maps.Geocoder;var t=new google.maps.places.Autocomplete(e.searchSenderElementRef.nativeElement);t.addListener("place_changed",(function(){e.ngZone.run((function(){var a=t.getPlace();null!=a.geometry&&(e.latitudeSender=a.geometry.location.lat(),e.longitudeSender=a.geometry.location.lng(),e.zoomSender=12,e.getAddress(e.latitudeSender,e.longitudeSender,"SENDER"))}))}));var a=new google.maps.places.Autocomplete(e.searchReceiverElementRef.nativeElement);a.addListener("place_changed",(function(){e.ngZone.run((function(){var t=a.getPlace();null!=t.geometry&&(e.latitudeReceiver=t.geometry.location.lat(),e.longitudeReceiver=t.geometry.location.lng(),e.zoomReceiver=12,e.getAddress(e.latitudeReceiver,e.longitudeReceiver,"RECEIVER"))}))}))}))}},{key:"createForm",value:function(){this.form=this._formBuilder.group({payment_method:["COD",b.v.required],payer:["SENDER",b.v.required],item_type:["Goods",b.v.maxLength(45)],product_name:["",b.v.maxLength(255)],weight:["5KG",b.v.maxLength(100)],distance:[0,[b.v.required,b.v.min(1),b.v.maxLength(10)]],cost_per_km:[10,[b.v.required,b.v.min(1),b.v.maxLength(10)]],payable_amount:[0,[b.v.required,b.v.min(1),b.v.maxLength(10)]],sender_name:["",b.v.maxLength(100)],sender_mobile:["",b.v.maxLength(10)],sender_address:["",b.v.maxLength(255)],sender_pin:["",b.v.maxLength(20)],sender_landmark:["",b.v.maxLength(255)],sender_latitude:["",b.v.required],sender_longitude:["",b.v.required],receiver_name:["",b.v.maxLength(100)],receiver_mobile:["",b.v.maxLength(10)],receiver_address:["",b.v.maxLength(255)],receiver_pin:["",b.v.maxLength(20)],receiver_landmark:["",b.v.maxLength(255)],receiver_latitude:["",b.v.required],receiver_longitude:["",b.v.required]})}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.form.valid){var a=this.form.value;a.receiver_mobile&&(a.receiver_mobile="+91"+a.receiver_mobile),a.sender_mobile&&(a.sender_mobile="+91"+a.sender_mobile),this._ProgressBarService.show(),this._PickupService.addPickup(a).subscribe((function(e){t._ProgressBarService.hide(),e.success?(t._ToastService.info(e.message),t.dialogRef.close(!0),t.form.reset()):t._ToastService.error(e.message)}))}}},{key:"setCurrentLocation",value:function(){var e=this;"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){e.latitudeSender=t.coords.latitude,e.longitudeSender=t.coords.longitude,e.zoomSender=8,e.getAddress(e.latitudeSender,e.longitudeSender,"SENDER"),e.latitudeReceiver=t.coords.latitude,e.longitudeReceiver=t.coords.longitude,e.zoomReceiver=8,e.getAddress(e.latitudeReceiver,e.longitudeReceiver,"RECEIVER")}))}},{key:"markerDragEnd",value:function(e,t){"SENDER"===t?(this.latitudeSender=e.latLng.lat(),this.longitudeSender=e.latLng.lng(),this.getAddress(this.latitudeSender,this.longitudeSender,t)):"RECEIVER"===t&&(this.latitudeReceiver=e.latLng.lat(),this.longitudeReceiver=e.latLng.lng(),this.getAddress(this.latitudeReceiver,this.longitudeReceiver,t))}},{key:"getPin",value:function(e){var t=e.find((function(e){return e.types.includes("postal_code")}));return(null==t?void 0:t.long_name)?null==t?void 0:t.long_name:null}},{key:"getAddress",value:function(e,t,a){var i=this;this.geoCoder.geocode({location:{lat:e,lng:t}},(function(r,n){"OK"===n?r[0]?("SENDER"===a?(i.zoomSender=12,i.form.patchValue({sender_address:r[0].formatted_address,sender_latitude:e,sender_longitude:t,sender_pin:i.getPin(r[0].address_components)})):"RECEIVER"===a&&(i.zoomReceiver=12,i.form.patchValue({receiver_address:r[0].formatted_address,receiver_latitude:e,receiver_longitude:t,receiver_pin:i.getPin(r[0].address_components)})),i.calculateDistance()):i._ToastService.error("No results found"):i._ToastService.error("Geocoder failed due to: "+n)}))}},{key:"calculateDistance",value:function(){var e=this,t=new google.maps.LatLng(this.latitudeSender,this.longitudeSender),a=new google.maps.LatLng(this.latitudeReceiver,this.longitudeReceiver);(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[t],destinations:[a],travelMode:google.maps.TravelMode.TWO_WHEELER},(function(t,a){var i,r;if("OK"===a&&t&&t.rows[0]){var n=null===(r=null===(i=t.rows[0])||void 0===i?void 0:i.elements[0])||void 0===r?void 0:r.distance.value;e.calculateAmount(null,n/1e3)}}))}},{key:"calculateAmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;e&&e.preventDefault(),this.form.patchValue({distance:t,payable_amount:(t*parseFloat(this.form.value.cost_per_km)).toFixed(2)})}}]),e}()).\u0275fac=function(e){return new(e||D)(o.Sb(u.g),o.Sb(b.d),o.Sb(m.a),o.Sb(p.a),o.Sb(h),o.Sb(_.d),o.Sb(o.A))},D.\u0275cmp=o.Mb({type:D,selectors:[["app-save-pickup"]],viewQuery:function(e,t){var a;1&e&&(o.Mc(w,!0),o.Mc(x,!0)),2&e&&(o.vc(a=o.hc())&&(t.searchSenderElementRef=a.first),o.vc(a=o.hc())&&(t.searchReceiverElementRef=a.first))},decls:113,vars:16,consts:[["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-xs-12","col-md-6"],[1,"full-width"],["type","text","matInput","","placeholder","Sender Name","formControlName","sender_name"],["type","text","matInput","","placeholder","Sender Mobile","formControlName","sender_mobile"],[1,"col-xs-12"],["appearance","outline","floatLabel","auto",1,"full-width"],["type","text","matInput","","autocorrect","off","autocapitalize","off","spellcheck","off","type","text",3,"keydown.enter"],["searchSender",""],["matSuffix",""],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],["type","text","matInput","","placeholder","Sender Address","formControlName","sender_address","readonly",""],["type","text","matInput","","placeholder","Sender Pin","formControlName","sender_pin","readonly",""],["type","text","matInput","","placeholder","Sender Landmark","formControlName","sender_landmark"],[1,"col-xs-12","col-md-3"],["type","text","matInput","","placeholder","Sender Lat","formControlName","sender_latitude","readonly","","required",""],["type","text","matInput","","placeholder","Sender Long","formControlName","sender_longitude","readonly","","required",""],["type","text","matInput","","placeholder","Receiver Name","formControlName","receiver_name"],["type","text","matInput","","placeholder","Receiver Mobile","formControlName","receiver_mobile"],["searchReceiver",""],["type","text","matInput","","placeholder","Receiver Address","formControlName","receiver_address","readonly",""],["type","text","matInput","","placeholder","Receiver Pin","formControlName","receiver_pin","readonly",""],["type","text","matInput","","placeholder","Receiver Landmark","formControlName","receiver_landmark"],["type","text","matInput","","placeholder","Receiver Lat","formControlName","receiver_latitude","readonly","","required",""],["type","text","matInput","","placeholder","Receiver Long","formControlName","receiver_longitude","readonly","","required",""],["formControlName","payment_method","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","payer","required",""],["type","text","matInput","","placeholder","Item Type","formControlName","item_type"],["type","text","matInput","","placeholder","Product Name","formControlName","product_name"],["type","text","matInput","","placeholder","Weight","formControlName","weight"],[1,"col-xs-12","col-md-4"],["type","number","matInput","","placeholder","Cost per KM","formControlName","cost_per_km","required","",3,"change"],["type","text","matInput","","placeholder","Distance","formControlName","distance","readonly","","required",""],["type","text","matInput","","placeholder","Payable Amount","formControlName","payable_amount","required",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(o.Yb(0,"form",0),o.gc("submit",(function(e){return t.submit(e)})),o.Yb(1,"app-modal-header"),o.Gc(2,"Add Pickup "),o.Xb(),o.Yb(3,"app-modal-body"),o.Yb(4,"mat-card"),o.Yb(5,"mat-card-header"),o.Yb(6,"mat-card-title"),o.Gc(7,"Sender Detail"),o.Xb(),o.Xb(),o.Yb(8,"mat-card-content"),o.Yb(9,"div",1),o.Yb(10,"div",2),o.Yb(11,"mat-form-field",3),o.Tb(12,"input",4),o.Xb(),o.Xb(),o.Yb(13,"div",2),o.Yb(14,"mat-form-field",3),o.Tb(15,"input",5),o.Xb(),o.Xb(),o.Yb(16,"div",6),o.Yb(17,"mat-form-field",7),o.Yb(18,"mat-label"),o.Gc(19,"Search Sender Location"),o.Xb(),o.Yb(20,"input",8,9),o.gc("keydown.enter",(function(e){return e.preventDefault()})),o.Xb(),o.Yb(22,"mat-icon",10),o.Gc(23,"search"),o.Xb(),o.Xb(),o.Yb(24,"agm-map",11),o.Yb(25,"agm-marker",12),o.gc("dragEnd",(function(e){return t.markerDragEnd(e,"SENDER")})),o.Xb(),o.Xb(),o.Xb(),o.Yb(26,"div",2),o.Yb(27,"mat-form-field",3),o.Tb(28,"input",13),o.Xb(),o.Xb(),o.Yb(29,"div",2),o.Yb(30,"mat-form-field",3),o.Tb(31,"input",14),o.Xb(),o.Xb(),o.Yb(32,"div",2),o.Yb(33,"mat-form-field",3),o.Tb(34,"input",15),o.Xb(),o.Xb(),o.Yb(35,"div",16),o.Yb(36,"mat-form-field",3),o.Tb(37,"input",17),o.Xb(),o.Xb(),o.Yb(38,"div",16),o.Yb(39,"mat-form-field",3),o.Tb(40,"input",18),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(41,"mat-card"),o.Yb(42,"mat-card-header"),o.Yb(43,"mat-card-title"),o.Gc(44,"Receiver Detail"),o.Xb(),o.Xb(),o.Yb(45,"mat-card-content"),o.Yb(46,"div",1),o.Yb(47,"div",2),o.Yb(48,"mat-form-field",3),o.Tb(49,"input",19),o.Xb(),o.Xb(),o.Yb(50,"div",2),o.Yb(51,"mat-form-field",3),o.Tb(52,"input",20),o.Xb(),o.Xb(),o.Yb(53,"div",6),o.Yb(54,"mat-form-field",7),o.Yb(55,"mat-label"),o.Gc(56,"Search Receiver Location"),o.Xb(),o.Yb(57,"input",8,21),o.gc("keydown.enter",(function(e){return e.preventDefault()})),o.Xb(),o.Xb(),o.Yb(59,"agm-map",11),o.Yb(60,"agm-marker",12),o.gc("dragEnd",(function(e){return t.markerDragEnd(e,"RECEIVER")})),o.Xb(),o.Xb(),o.Xb(),o.Yb(61,"div",2),o.Yb(62,"mat-form-field",3),o.Tb(63,"input",22),o.Xb(),o.Xb(),o.Yb(64,"div",2),o.Yb(65,"mat-form-field",3),o.Tb(66,"input",23),o.Xb(),o.Xb(),o.Yb(67,"div",2),o.Yb(68,"mat-form-field",3),o.Tb(69,"input",24),o.Xb(),o.Xb(),o.Yb(70,"div",16),o.Yb(71,"mat-form-field",3),o.Tb(72,"input",25),o.Xb(),o.Xb(),o.Yb(73,"div",16),o.Yb(74,"mat-form-field",3),o.Tb(75,"input",26),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(76,"div",1),o.Yb(77,"div",2),o.Yb(78,"mat-form-field",3),o.Yb(79,"mat-label"),o.Gc(80,"Payment Method"),o.Xb(),o.Yb(81,"mat-select",27),o.Ec(82,T,2,2,"mat-option",28),o.Xb(),o.Xb(),o.Xb(),o.Yb(83,"div",2),o.Yb(84,"mat-form-field",3),o.Yb(85,"mat-label"),o.Gc(86,"Payer"),o.Xb(),o.Yb(87,"mat-select",29),o.Ec(88,I,2,2,"mat-option",28),o.Xb(),o.Xb(),o.Xb(),o.Yb(89,"div",2),o.Yb(90,"mat-form-field",3),o.Tb(91,"input",30),o.Xb(),o.Xb(),o.Yb(92,"div",2),o.Yb(93,"mat-form-field",3),o.Tb(94,"input",31),o.Xb(),o.Xb(),o.Yb(95,"div",2),o.Yb(96,"mat-form-field",3),o.Tb(97,"input",32),o.Xb(),o.Xb(),o.Xb(),o.Yb(98,"div",1),o.Yb(99,"div",33),o.Yb(100,"mat-form-field",3),o.Yb(101,"input",34),o.gc("change",(function(e){return t.calculateAmount(e,t.form.value.distance)})),o.Xb(),o.Xb(),o.Xb(),o.Yb(102,"div",33),o.Yb(103,"mat-form-field",3),o.Tb(104,"input",35),o.Yb(105,"span",10),o.Gc(106,"KM"),o.Xb(),o.Xb(),o.Xb(),o.Yb(107,"div",33),o.Yb(108,"mat-form-field",3),o.Tb(109,"input",36),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(110,"app-modal-action"),o.Yb(111,"button",37),o.gc("click",(function(e){return t.submit(e)})),o.Gc(112,"Save"),o.Xb(),o.Xb(),o.Xb()),2&e&&(o.qc("formGroup",t.form),o.Gb(24),o.qc("latitude",t.latitudeSender)("longitude",t.longitudeSender)("zoom",t.zoomSender),o.Gb(1),o.qc("latitude",t.latitudeSender)("longitude",t.longitudeSender)("markerDraggable",!0),o.Gb(34),o.qc("latitude",t.latitudeReceiver)("longitude",t.longitudeReceiver)("zoom",t.zoomReceiver),o.Gb(1),o.qc("latitude",t.latitudeReceiver)("longitude",t.longitudeReceiver)("markerDraggable",!0),o.Gb(22),o.qc("ngForOf",t.paymentMethods),o.Gb(6),o.qc("ngForOf",t.payerTypes),o.Gb(23),o.qc("disabled",t._ProgressBarService.inProgress()||t.form.invalid))},directives:[b.w,b.p,b.i,y.a,X.a,Y.a,Y.d,Y.f,Y.c,S.b,C.a,b.b,b.o,b.g,S.f,k.a,S.h,_.b,_.c,b.u,G.a,r.l,b.s,P.a,E.b,R.k],styles:["agm-map[_ngcontent-%COMP%]{height:300px}"]}),D),q=a("d8ZS");function O(e,t){if(1&e&&(o.Yb(0,"mat-option",6),o.Gc(1),o.Xb()),2&e){var a=t.$implicit;o.qc("value",a.carrier_id),o.Gb(1),o.Kc(" ",a.name," | ",a.mobile_number," | Orders:",a.no_of_active_orders," ")}}var L,A=((L=function(){function e(t,a,i,r,n,o,c){var l=this;_classCallCheck(this,e),this.dialogRef=t,this.modalData=a,this._formBuilder=i,this._PickupService=r,this._CarrierService=n,this._ToastService=o,this._ProgressBarService=c,this.carriers=[],n.getAvailableCarriers().subscribe((function(e){l.carriers=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=this._formBuilder.group({id:[this.modalData.pickup.id,b.v.required],carrier_id:["",b.v.required]})}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),this.form.valid){var a=this.form.value;this._ProgressBarService.show(),this._PickupService.assignPickup(a).subscribe((function(e){e.success?(t._ToastService.info(e.message),t.dialogRef.close(!0)):t._ToastService.error(e.message),t._ProgressBarService.hide()}))}}}]),e}()).\u0275fac=function(e){return new(e||L)(o.Sb(u.g),o.Sb(u.a),o.Sb(b.d),o.Sb(h),o.Sb(q.a),o.Sb(p.a),o.Sb(m.a))},L.\u0275cmp=o.Mb({type:L,selectors:[["app-assign-pickup"]],decls:14,vars:5,consts:[["autocomplete","off",3,"formGroup","submit"],[1,"full-width"],["matPrefix","","color","primary",2,"margin-right","20px"],["formControlName","carrier_id"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(o.Yb(0,"form",0),o.gc("submit",(function(e){return t.submit(e)})),o.Yb(1,"app-modal-header"),o.Gc(2),o.Xb(),o.Yb(3,"app-modal-body"),o.Yb(4,"mat-form-field",1),o.Yb(5,"mat-label"),o.Gc(6,"Select carrier (delivery boy)"),o.Xb(),o.Yb(7,"mat-icon",2),o.Gc(8,"local_shipping"),o.Xb(),o.Yb(9,"mat-select",3),o.Ec(10,O,2,4,"mat-option",4),o.Xb(),o.Xb(),o.Xb(),o.Yb(11,"app-modal-action"),o.Yb(12,"button",5),o.gc("click",(function(e){return t.submit(e)})),o.Gc(13,"Assign"),o.Xb(),o.Xb(),o.Xb()),2&e&&(o.qc("formGroup",t.form),o.Gb(2),o.Jc("Assign ",t.modalData.pickup.id," (available carrier ",t.carriers.length,") "),o.Gb(8),o.qc("ngForOf",t.carriers),o.Gb(2),o.qc("disabled",t._ProgressBarService.inProgress()||t.form.invalid))},directives:[b.w,b.p,b.i,y.a,X.a,S.b,S.f,k.a,S.g,G.a,b.o,b.g,r.l,P.a,E.b,R.k],styles:[""]}),L),M=a("Qu3c"),z=a("EYlX");function H(e,t){1&e&&(o.Yb(0,"th",26),o.Gc(1," Tran.ID# "),o.Xb())}function V(e,t){1&e&&(o.Yb(0,"mat-icon",32),o.Gc(1,"verified_user"),o.Xb())}function F(e,t){1&e&&(o.Yb(0,"mat-icon",33),o.Gc(1,"error"),o.Xb())}function K(e,t){1&e&&(o.Yb(0,"mat-icon",34),o.Gc(1,"pending"),o.Xb())}function B(e,t){if(1&e&&(o.Yb(0,"td",27),o.Gc(1),o.Wb(2,28),o.Ec(3,V,2,0,"mat-icon",29),o.Ec(4,F,2,0,"mat-icon",30),o.Ec(5,K,2,0,"mat-icon",31),o.Vb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(1),o.Ic(" ",a.id," "),o.Gb(1),o.qc("ngSwitch",a.transaction_status),o.Gb(1),o.qc("ngSwitchCase","Success"),o.Gb(1),o.qc("ngSwitchCase","Failed"),o.Gb(1),o.qc("ngSwitchCase","Pending")}}function j(e,t){1&e&&(o.Yb(0,"th",35),o.Gc(1," Sender "),o.Xb())}function W(e,t){1&e&&(o.Yb(0,"mat-icon",40),o.Gc(1,"monetization_on"),o.Xb())}function $(e,t){if(1&e&&(o.Yb(0,"td",27),o.Yb(1,"div",36),o.Ec(2,W,2,0,"mat-icon",37),o.Yb(3,"span"),o.Gc(4),o.Xb(),o.Xb(),o.Yb(5,"div",38),o.Yb(6,"span"),o.Gc(7),o.Xb(),o.Xb(),o.Yb(8,"div",39),o.Yb(9,"span"),o.Gc(10),o.Xb(),o.Xb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(2),o.qc("ngIf","SENDER"===a.payer),o.Gb(2),o.Hc(a.sender_name),o.Gb(3),o.Hc(a.sender_address),o.Gb(3),o.Hc(a.sender_mobile)}}function U(e,t){1&e&&(o.Yb(0,"th",35),o.Gc(1," Receiver "),o.Xb())}function J(e,t){1&e&&(o.Yb(0,"mat-icon",42),o.Gc(1,"monetization_on"),o.Xb())}function Q(e,t){if(1&e&&(o.Yb(0,"td",27),o.Yb(1,"div",36),o.Ec(2,J,2,0,"mat-icon",41),o.Yb(3,"span"),o.Gc(4),o.Xb(),o.Xb(),o.Yb(5,"div",38),o.Yb(6,"span"),o.Gc(7),o.Xb(),o.Xb(),o.Yb(8,"div",39),o.Yb(9,"span"),o.Gc(10),o.Xb(),o.Xb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(2),o.qc("ngIf","RECEIVER"===a.payer),o.Gb(2),o.Hc(a.receiver_name),o.Gb(3),o.Hc(a.receiver_address),o.Gb(3),o.Hc(a.receiver_mobile)}}function Z(e,t){1&e&&(o.Yb(0,"th",43),o.Gc(1," Payment "),o.Xb())}function ee(e,t){if(1&e&&(o.Yb(0,"td",27),o.Yb(1,"div"),o.Gc(2),o.lc(3,"currency"),o.Xb(),o.Yb(4,"div",38),o.Gc(5," Mode: "),o.Yb(6,"strong"),o.Gc(7),o.Xb(),o.Xb(),o.Yb(8,"div",38),o.Gc(9," Distance: "),o.Yb(10,"strong"),o.Gc(11),o.Xb(),o.Gc(12," KM "),o.Xb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(2),o.Hc(o.nc(3,3,a.payable_amount,"INR")),o.Gb(5),o.Hc(a.payment_method),o.Gb(4),o.Hc(a.distance)}}function te(e,t){1&e&&(o.Yb(0,"th",26),o.Gc(1," Item "),o.Xb())}function ae(e,t){if(1&e&&(o.Yb(0,"td",27),o.Yb(1,"div",36),o.Gc(2),o.Xb(),o.Yb(3,"div",38),o.Gc(4),o.Xb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(2),o.Ic(" ",a.item_type," "),o.Gb(2),o.Ic(" ",a.product_name," ")}}function ie(e,t){1&e&&(o.Yb(0,"th",26),o.Gc(1," Status "),o.Xb())}function re(e,t){if(1&e&&(o.Yb(0,"td",27),o.Yb(1,"span",36),o.Gc(2),o.Xb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(2),o.Hc(a.status)}}function ne(e,t){1&e&&(o.Yb(0,"th",44),o.Gc(1," Dates "),o.Xb())}function oe(e,t){if(1&e&&(o.Yb(0,"td",27),o.Yb(1,"div",38),o.Gc(2," Placed: "),o.Yb(3,"strong"),o.Gc(4),o.lc(5,"date"),o.Xb(),o.Xb(),o.Yb(6,"div",38),o.Gc(7," Assigned: "),o.Yb(8,"strong"),o.Gc(9),o.lc(10,"date"),o.Xb(),o.Xb(),o.Yb(11,"div",38),o.Gc(12," Pickup: "),o.Yb(13,"strong"),o.Gc(14),o.lc(15,"date"),o.Xb(),o.Xb(),o.Yb(16,"div",38),o.Gc(17," Finished: "),o.Yb(18,"strong"),o.Gc(19),o.lc(20,"date"),o.Xb(),o.Xb(),o.Xb()),2&e){var a=t.$implicit;o.Gb(4),o.Hc(o.nc(5,4,a.created_at,"short")),o.Gb(5),o.Hc(o.nc(10,7,a.assigned_on,"short")),o.Gb(5),o.Hc(o.nc(15,10,a.pickup_on,"short")),o.Gb(5),o.Hc(o.nc(20,13,a.completed_on,"short"))}}function ce(e,t){1&e&&(o.Yb(0,"th",45),o.Gc(1," Action "),o.Xb())}function le(e,t){if(1&e){var a=o.Zb();o.Yb(0,"td",27),o.Yb(1,"button",46),o.gc("click",(function(){o.yc(a);var e=t.$implicit;return o.kc().assign(e)})),o.Yb(2,"mat-icon"),o.Gc(3,"local_shipping"),o.Xb(),o.Gc(4," Assign "),o.Xb(),o.Tb(5,"app-track-carrier",47),o.Xb()}if(2&e){var i=t.$implicit;o.Gb(1),o.qc("disabled","PENDING"!==i.status),o.Gb(4),o.qc("carrierId",i.carrier_id)("disabled","IN_TRANSIT"!==i.status)("label","Tracking "+i.id)}}function de(e,t){1&e&&o.Tb(0,"tr",48)}function se(e,t){1&e&&o.Tb(0,"tr",49)}var be,ue,me,pe,fe=((be=function(){function e(t,a,i,r){_classCallCheck(this,e),this.dialog=t,this._ProgressBarService=a,this._PickupService=i,this._ToastService=r,this.displayedColumns=["id","sender_name","receiver_name","payable_amount","item_type","status","dates","action"],this.length=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,100]}return _createClass(e,[{key:"ngOnInit",value:function(){this.dataSource=new d.k([]),this.getAllPickups()}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"getAllPickups",value:function(){var e=this;this._ProgressBarService.show(),this._PickupService.getAllPickups().subscribe((function(t){e.length=t.length,e.dataSource.data=t,e.dataSource.paginator=e.paginator,e._ProgressBarService.hide()}))}},{key:"addPickup",value:function(){var e=this;this.dialog.open(N,{width:"800px",disableClose:!0}).afterClosed().subscribe((function(t){t&&e.getAllPickups()}))}},{key:"assign",value:function(e){var t=this;this.dialog.open(A,{width:"600px",disableClose:!0,data:{pickup:e}}).afterClosed().subscribe((function(e){e&&t.getAllPickups()}))}}]),e}()).\u0275fac=function(e){return new(e||be)(o.Sb(u.b),o.Sb(m.a),o.Sb(h),o.Sb(p.a))},be.\u0275cmp=o.Mb({type:be,selectors:[["app-pickup-list"]],viewQuery:function(e,t){var a;1&e&&o.Mc(l.a,!0),2&e&&o.vc(a=o.hc())&&(t.paginator=a.first)},decls:41,vars:7,consts:[[2,"padding","8px"],[1,"row"],[1,"col-xs-12","col-md-4"],["mat-button","","color","primary",3,"click"],[1,"col-xs-12","col-md-4",2,"text-align","right"],["matInput","","placeholder","Search order","autocomplete","off",3,"keyup"],["input",""],[1,"table-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","id","mat-sort-header",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sender_name","mat-sort-header",""],["mat-header-cell","","style","width: 260px;",4,"matHeaderCellDef"],["matColumnDef","receiver_name","mat-sort-header",""],["matColumnDef","payable_amount"],["mat-header-cell","","style","width: 100px;",4,"matHeaderCellDef"],["matColumnDef","item_type"],["matColumnDef","status"],["matColumnDef","dates"],["mat-header-cell","","style","width: 160px;",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch"],["class","success","matTooltip","Transaction verified","matTooltipPosition","right",4,"ngSwitchCase"],["class","failed","matTooltip","Transaction failed","matTooltipPosition","right",4,"ngSwitchCase"],["class","pending","matTooltip","Transaction status pending","matTooltipPosition","right",4,"ngSwitchCase"],["matTooltip","Transaction verified","matTooltipPosition","right",1,"success"],["matTooltip","Transaction failed","matTooltipPosition","right",1,"failed"],["matTooltip","Transaction status pending","matTooltipPosition","right",1,"pending"],["mat-header-cell","",2,"width","260px"],[1,"name"],["matTooltip","Payable by Sender","class","payer",4,"ngIf"],[1,"address"],[1,"mobile"],["matTooltip","Payable by Sender",1,"payer"],["matTooltip","Payable by Receiver","class","payer",4,"ngIf"],["matTooltip","Payable by Receiver",1,"payer"],["mat-header-cell","",2,"width","100px"],["mat-header-cell","",2,"width","160px"],["mat-header-cell","",2,"width","80px"],["mat-button","","color","primary","aria-label","Assign","matTooltip","Assign the pickup to a delivery boy",3,"disabled","click"],[3,"carrierId","disabled","label"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(o.Yb(0,"div",0),o.Yb(1,"div",1),o.Yb(2,"div",2),o.Yb(3,"button",3),o.gc("click",(function(){return t.addPickup()})),o.Yb(4,"mat-icon"),o.Gc(5,"add"),o.Xb(),o.Gc(6," Add Pickup "),o.Xb(),o.Xb(),o.Tb(7,"div",2),o.Yb(8,"div",4),o.Yb(9,"mat-form-field"),o.Yb(10,"input",5,6),o.gc("keyup",(function(e){return t.applyFilter(e)})),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(12,"div",7),o.Yb(13,"table",8),o.Wb(14,9),o.Ec(15,H,2,0,"th",10),o.Ec(16,B,6,5,"td",11),o.Vb(),o.Wb(17,12),o.Ec(18,j,2,0,"th",13),o.Ec(19,$,11,4,"td",11),o.Vb(),o.Wb(20,14),o.Ec(21,U,2,0,"th",13),o.Ec(22,Q,11,4,"td",11),o.Vb(),o.Wb(23,15),o.Ec(24,Z,2,0,"th",16),o.Ec(25,ee,13,6,"td",11),o.Vb(),o.Wb(26,17),o.Ec(27,te,2,0,"th",10),o.Ec(28,ae,5,2,"td",11),o.Vb(),o.Wb(29,18),o.Ec(30,ie,2,0,"th",10),o.Ec(31,re,3,1,"td",11),o.Vb(),o.Wb(32,19),o.Ec(33,ne,2,0,"th",20),o.Ec(34,oe,21,16,"td",11),o.Vb(),o.Wb(35,21),o.Ec(36,ce,2,0,"th",22),o.Ec(37,le,6,4,"td",11),o.Vb(),o.Ec(38,de,1,0,"tr",23),o.Ec(39,se,1,0,"tr",24),o.Xb(),o.Xb(),o.Yb(40,"mat-paginator",25),o.gc("page",(function(e){return t.pageEvent=e})),o.Xb()),2&e&&(o.Gb(13),o.qc("dataSource",t.dataSource),o.Gb(25),o.qc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),o.Gb(1),o.qc("matRowDefColumns",t.displayedColumns),o.Gb(1),o.qc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[E.b,k.a,S.b,C.a,d.j,d.c,d.e,d.b,d.g,d.i,l.a,d.d,d.a,r.o,r.p,M.a,r.m,z.a,d.f,d.h],pipes:[r.d,r.f],styles:[".address[_ngcontent-%COMP%], .mobile[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .payer[_ngcontent-%COMP%]{cursor:default;font-size:10px;text-overflow:ellipsis;overflow:hidden;padding:2px}.name[_ngcontent-%COMP%]{font-weight:500;font-size:12px}.mobile[_ngcontent-%COMP%]{color:#1e88e5}.payer[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:20px;color:green}"]}),be=Object(c.a)([Object(s.a)()],be)),ge=[{path:"",component:(ue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275cmp=o.Mb({type:ue,selectors:[["app-pickup-management"]],decls:1,vars:0,template:function(e,t){1&e&&o.Tb(0,"app-pickup-list")},directives:[fe],styles:[""]}),ue)}],ve=((me=function e(){_classCallCheck(this,e)}).\u0275mod=o.Qb({type:me}),me.\u0275inj=o.Pb({factory:function(e){return new(e||me)},imports:[[n.e.forChild(ge)],n.e]}),me),he=a("PCNd"),_e=((pe=function e(){_classCallCheck(this,e)}).\u0275mod=o.Qb({type:pe}),pe.\u0275inj=o.Pb({factory:function(e){return new(e||pe)},imports:[[r.c,ve,he.a.forRoot()]]}),pe)},Olgc:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("fXoL"),r=a("dNgK"),n=function(){var e=function(){function e(t){_classCallCheck(this,e),this.snackbar=t,this.defaultConfig={horizontalPosition:"right",verticalPosition:"bottom",duration:6e3}}return _createClass(e,[{key:"info",value:function(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"primary"}))}},{key:"error",value:function(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"warn"}))}},{key:"warning",value:function(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"accent"}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.cc(r.a))},e.\u0275prov=i.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);
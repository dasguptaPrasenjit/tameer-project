(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Eje6:function(e,t,a){"use strict";a.r(t),a.d(t,"BannerManagementModule",(function(){return M}));var i=a("ofXK"),n=a("tyNb"),r=a("fXoL"),c=a("M9IT"),s=a("+0xr"),o=a("3Pt+"),l=a("0IaG"),b=a("lJxs"),d=a("aR35"),u=a("tk/3");let p=(()=>{class e{constructor(e){this.http=e}addBanner(e){return this.http.post(d.e.BANNER_ADD,e)}updateBanner(e){return this.http.post(d.e.BANNER_UPDATE,e)}deleteBanner(e){return this.http.post(d.e.BANNER_DELETE,e)}getAllBanners(){return this.http.post(d.e.BANNER_ALL,{}).pipe(Object(b.a)(e=>{let t=[];return 200===e.status&&(t=e.data),t}))}}return e.\u0275fac=function(t){return new(t||e)(r.cc(u.b))},e.\u0275prov=r.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=a("UJjo"),h=a("XkPD"),f=a("Olgc"),g=a("r1eF"),v=a("SIeF"),S=a("kmnG"),_=a("qFsG"),w=a("W/tz"),B=a("pJxS"),k=a("bTqV"),y=a("NFeN"),X=a("Us6y");function G(e,t){if(1&e){const e=r.Zb();r.Yb(0,"span"),r.Gc(1),r.lc(2,"textTruncate"),r.Yb(3,"mat-icon",8),r.gc("click",(function(){return r.yc(e),r.kc().removeFile()})),r.Gc(4,"cancel"),r.Xb(),r.Xb()}if(2&e){const e=r.kc();var a;r.Gb(1),r.Ic(" ",r.nc(2,1,null==(a=e.form.get("image"))?null:a.value,15)," ")}}const Y=function(){return[".jpg",".jpeg",".png"]};let C=(()=>{class e{constructor(e,t,a,i,n,r,c){this.dialogRef=e,this.modalData=t,this._formBuilder=a,this._BannerService=i,this._ProgressBarService=n,this._UploaderService=r,this._ToastService=c,this.createForm()}ngOnInit(){}createForm(){this.form=this._formBuilder.group({name:["",o.v.required],image:["",o.v.required]})}fileChanged(e){let t=new FormData;t.append("filenames[]",e.target.files[0]),t.append("type","banner"),this._ProgressBarService.show(),this._UploaderService.upload(t).subscribe(e=>{this._ProgressBarService.hide(),e&&this.form.patchValue({image:e})})}removeFile(){this.form.patchValue({image:""})}submit(e){if(e.preventDefault(),this.form.valid){const e=this.form.value;this._ProgressBarService.show(),this._BannerService.addBanner(e).subscribe(e=>{this._ProgressBarService.hide(),200===e.status?(this._ToastService.info(e.message),this.dialogRef.close(!0),this.form.reset()):this._ToastService.error(e.message)})}}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(l.g),r.Sb(l.a),r.Sb(o.d),r.Sb(p),r.Sb(m.a),r.Sb(h.a),r.Sb(f.a))},e.\u0275cmp=r.Mb({type:e,selectors:[["app-save-banner"]],decls:15,vars:6,consts:[["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-xs-12","col-md-6"],[1,"full-width"],["type","text","matInput","","placeholder","Banner Name","formControlName","name"],[3,"fileTypes","change"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"click"]],template:function(e,t){if(1&e&&(r.Yb(0,"form",0),r.gc("submit",(function(e){return t.submit(e)})),r.Yb(1,"app-modal-header"),r.Gc(2),r.Xb(),r.Yb(3,"app-modal-body"),r.Yb(4,"div",1),r.Yb(5,"div",2),r.Yb(6,"mat-form-field",3),r.Tb(7,"input",4),r.Xb(),r.Xb(),r.Yb(8,"div",2),r.Yb(9,"div",3),r.Yb(10,"app-file-browser",5),r.gc("change",(function(e){return t.fileChanged(e)})),r.Xb(),r.Ec(11,G,5,4,"span",6),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(12,"app-modal-action"),r.Yb(13,"button",7),r.gc("click",(function(e){return t.submit(e)})),r.Gc(14,"Save"),r.Xb(),r.Xb(),r.Xb()),2&e){var a;const e=null==(a=t.form.get("image"))?null:a.value;r.qc("formGroup",t.form),r.Gb(2),r.Ic("",null!=t.modalData&&t.modalData.banner?"Edit"+(null==t.modalData?null:t.modalData.banner.name):"Add Banner"," "),r.Gb(8),r.qc("fileTypes",r.sc(5,Y)),r.Gb(1),r.qc("ngIf",e),r.Gb(2),r.qc("disabled",t._ProgressBarService.inProgress()||t.form.invalid)}},directives:[o.w,o.p,o.i,g.a,v.a,S.b,_.a,o.b,o.o,o.g,w.a,i.m,B.a,k.b,y.a],pipes:[X.a],styles:[""]}),e})();var D=a("R6Eq"),E=a("ZVAu");function O(e,t){1&e&&(r.Yb(0,"th",18),r.Gc(1," Name "),r.Xb())}const I=function(e){return{deleted:e}};function P(e,t){if(1&e&&(r.Yb(0,"td",19),r.Yb(1,"span",20),r.Gc(2),r.Xb(),r.Xb()),2&e){const e=t.$implicit;r.Gb(1),r.qc("ngClass",r.tc(2,I,e.is_deleted)),r.Gb(1),r.Hc(e.name)}}function A(e,t){1&e&&(r.Yb(0,"th",18),r.Gc(1," Image "),r.Xb())}function R(e,t){if(1&e&&(r.Yb(0,"td",19),r.Tb(1,"img",21),r.Xb()),2&e){const e=t.$implicit,a=r.kc();r.Gb(1),r.qc("src",a._UploaderService.getImage(e.image),r.zc)}}function T(e,t){1&e&&(r.Yb(0,"th",18),r.Gc(1," Updated "),r.Xb())}function q(e,t){if(1&e&&(r.Yb(0,"td",19),r.Gc(1),r.lc(2,"date"),r.Xb()),2&e){const e=t.$implicit;r.Gb(1),r.Ic(" ",r.mc(2,1,e.updated_at)," ")}}function N(e,t){1&e&&(r.Yb(0,"th",22),r.Gc(1," Action "),r.Xb())}function j(e,t){if(1&e){const e=r.Zb();r.Yb(0,"td",19),r.Yb(1,"button",23),r.gc("click",(function(){r.yc(e);const a=t.$implicit;return r.kc().remove(a)})),r.Yb(2,"mat-icon"),r.Gc(3,"delete"),r.Xb(),r.Gc(4," Remove "),r.Xb(),r.Yb(5,"button",24),r.gc("click",(function(){r.yc(e);const a=t.$implicit;return r.kc().edit(a)})),r.Yb(6,"mat-icon"),r.Gc(7),r.Xb(),r.Gc(8),r.Xb(),r.Xb()}if(2&e){const e=t.$implicit;r.Gb(1),r.qc("disabled",1===e.is_deleted||1===e.is_active),r.Gb(4),r.qc("disabled",1===e.is_deleted),r.Gb(2),r.Hc(e.is_active?"check_circle":"highlight_off"),r.Gb(1),r.Ic(" ",e.is_active?"Active":"Inactive"," ")}}function x(e,t){1&e&&r.Tb(0,"tr",25)}function z(e,t){1&e&&r.Tb(0,"tr",26)}let F=(()=>{class e{constructor(e,t,a,i,n){this.dialog=e,this._ProgressBarService=t,this._UploaderService=a,this._BannerService=i,this._ToastService=n,this.displayedColumns=["name","image","updated_at","action"],this.length=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,100]}ngOnInit(){this.dataSource=new s.k([]),this.getAllBanners()}getAllBanners(){this._ProgressBarService.show(),this._BannerService.getAllBanners().subscribe(e=>{this.length=e.length,this.dataSource.data=e,this.dataSource.paginator=this.paginator,this._ProgressBarService.hide()})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}add(){this.dialog.open(C,{width:"600px",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getAllBanners()})}edit(e){this.dialog.open(D.a,{width:"600px",disableClose:!0,data:{message:(e.is_active?"Inactivating":"Activating")+" this banner. Click Ok to continue."}}).afterClosed().subscribe(t=>{if(t){const t=e.is_active?0:1;this._ProgressBarService.show(),this._BannerService.updateBanner({bannerid:e.id,is_active:t}).subscribe(e=>{this._ToastService.info(e.message),this.getAllBanners()})}})}remove(e){this.dialog.open(D.a,{width:"600px",disableClose:!0,data:{message:"Removing this banner. Click Ok to continue."}}).afterClosed().subscribe(t=>{t&&(this._ProgressBarService.show(),this._BannerService.deleteBanner({bannerid:e.id}).subscribe(e=>{this._ToastService.info(e.message),this.getAllBanners()}))})}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(l.b),r.Sb(m.a),r.Sb(h.a),r.Sb(p),r.Sb(f.a))},e.\u0275cmp=r.Mb({type:e,selectors:[["app-banner-list"]],viewQuery:function(e,t){var a;1&e&&r.Mc(c.a,!0),2&e&&r.vc(a=r.hc())&&(t.paginator=a.first)},decls:27,vars:7,consts:[[1,"row"],[1,"col-xs-6"],["mat-button","","color","primary",3,"click"],[1,"col-xs-6",2,"text-align","right"],["matInput","","placeholder","Search","autocomplete","off",3,"keyup"],["input",""],[1,"table-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name","mat-sort-header",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","image","mat-sort-header",""],["matColumnDef","updated_at"],["matColumnDef","action"],["mat-header-cell","","style","width: 160px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"ngClass"],["height","40","appImgFallback","",3,"src"],["mat-header-cell","",2,"width","160px"],["mat-button","","color","primary","aria-label","Remove Banner",3,"disabled","click"],["mat-button","","color","primary","aria-label","Edit Banner",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(r.Yb(0,"div",0),r.Yb(1,"div",1),r.Yb(2,"button",2),r.gc("click",(function(){return t.add()})),r.Yb(3,"mat-icon"),r.Gc(4,"add"),r.Xb(),r.Gc(5," Add Banner "),r.Xb(),r.Xb(),r.Yb(6,"div",3),r.Yb(7,"mat-form-field"),r.Yb(8,"input",4,5),r.gc("keyup",(function(e){return t.applyFilter(e)})),r.Xb(),r.Xb(),r.Xb(),r.Xb(),r.Yb(10,"div",6),r.Yb(11,"table",7),r.Wb(12,8),r.Ec(13,O,2,0,"th",9),r.Ec(14,P,3,4,"td",10),r.Vb(),r.Wb(15,11),r.Ec(16,A,2,0,"th",9),r.Ec(17,R,2,1,"td",10),r.Vb(),r.Wb(18,12),r.Ec(19,T,2,0,"th",9),r.Ec(20,q,3,3,"td",10),r.Vb(),r.Wb(21,13),r.Ec(22,N,2,0,"th",14),r.Ec(23,j,9,4,"td",10),r.Vb(),r.Ec(24,x,1,0,"tr",15),r.Ec(25,z,1,0,"tr",16),r.Xb(),r.Xb(),r.Yb(26,"mat-paginator",17),r.gc("page",(function(e){return t.pageEvent=e})),r.Xb()),2&e&&(r.Gb(11),r.qc("dataSource",t.dataSource),r.Gb(13),r.qc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),r.Gb(1),r.qc("matRowDefColumns",t.displayedColumns),r.Gb(1),r.qc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[k.b,y.a,S.b,_.a,s.j,s.c,s.e,s.b,s.g,s.i,c.a,s.d,s.a,i.k,E.a,s.f,s.h],pipes:[i.f],styles:[""]}),e})();const H=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Mb({type:e,selectors:[["app-banner-management"]],decls:1,vars:0,template:function(e,t){1&e&&r.Tb(0,"app-banner-list")},directives:[F],styles:[""]}),e})()}];let U=(()=>{class e{}return e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({factory:function(t){return new(t||e)},imports:[[n.e.forChild(H)],n.e]}),e})();var V=a("PCNd");let M=(()=>{class e{}return e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({factory:function(t){return new(t||e)},imports:[[i.c,U,V.a.forRoot()]]}),e})()},Olgc:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a("fXoL"),n=a("dNgK");let r=(()=>{class e{constructor(e){this.snackbar=e,this.defaultConfig={horizontalPosition:"right",verticalPosition:"bottom",duration:6e3}}info(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"primary"}))}error(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"warn"}))}warning(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"accent"}))}}return e.\u0275fac=function(t){return new(t||e)(i.cc(n.a))},e.\u0275prov=i.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
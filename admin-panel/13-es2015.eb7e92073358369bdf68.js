(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"1bnl":function(e,t,i){"use strict";i.r(t),i.d(t,"PickupManagementModule",(function(){return me}));var a=i("ofXK"),r=i("tyNb"),n=i("fXoL"),o=i("mrSG"),c=i("M9IT"),s=i("+0xr"),l=i("VfN6"),d=i("3Pt+"),b=i("0IaG"),m=i("UJjo"),u=i("Olgc"),p=i("aR35"),h=i("lJxs"),g=i("tk/3");let f=(()=>{class e{constructor(e){this.http=e}getAllPickups(){return this.http.get(p.e.PICKUP.PICKUP).pipe(Object(h.a)(e=>{let t=[];return e.success&&(t=e.data),t}))}addPickup(e){return this.http.post(p.e.PICKUP.PICKUP_CREATE,e)}assignPickup(e){return this.http.post(p.e.PICKUP.PICKUP_ASSIGN,e)}}return e.\u0275fac=function(t){return new(t||e)(n.cc(g.b))},e.\u0275prov=n.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=i("pxUr"),X=i("r1eF"),Y=i("SIeF"),_=i("Wp6s"),S=i("kmnG"),y=i("qFsG"),G=i("NFeN"),C=i("d3UM"),P=i("pJxS"),k=i("bTqV"),E=i("FKr1");const R=["searchSender"],w=["searchReceiver"];function x(e,t){if(1&e&&(n.Yb(0,"mat-option",38),n.Gc(1),n.Xb()),2&e){const e=t.$implicit;n.qc("value",e),n.Gb(1),n.Ic(" ",e," ")}}function T(e,t){if(1&e&&(n.Yb(0,"mat-option",38),n.Gc(1),n.Xb()),2&e){const e=t.$implicit;n.qc("value",e),n.Gb(1),n.Ic(" ",e," ")}}let I=(()=>{class e{constructor(e,t,i,a,r,n,o){this.dialogRef=e,this._formBuilder=t,this._ProgressBarService=i,this._ToastService=a,this._PickupService=r,this.mapsAPILoader=n,this.ngZone=o,this.paymentMethods=["COD","ONLINE"],this.payerTypes=["SENDER","RECEIVER"]}ngOnInit(){this.createForm(),this.mapsAPILoader.load().then(()=>{this.setCurrentLocation(),this.geoCoder=new google.maps.Geocoder;let e=new google.maps.places.Autocomplete(this.searchSenderElementRef.nativeElement);e.addListener("place_changed",()=>{this.ngZone.run(()=>{let t=e.getPlace();null!=t.geometry&&(this.latitudeSender=t.geometry.location.lat(),this.longitudeSender=t.geometry.location.lng(),this.zoomSender=12,this.getAddress(this.latitudeSender,this.longitudeSender,"SENDER"))})});let t=new google.maps.places.Autocomplete(this.searchReceiverElementRef.nativeElement);t.addListener("place_changed",()=>{this.ngZone.run(()=>{let e=t.getPlace();null!=e.geometry&&(this.latitudeReceiver=e.geometry.location.lat(),this.longitudeReceiver=e.geometry.location.lng(),this.zoomReceiver=12,this.getAddress(this.latitudeReceiver,this.longitudeReceiver,"RECEIVER"))})})})}createForm(){this.form=this._formBuilder.group({payment_method:["COD",d.v.required],payer:["SENDER",d.v.required],item_type:["Goods",d.v.maxLength(45)],product_name:["",d.v.maxLength(255)],weight:["5KG",d.v.maxLength(100)],distance:[0,[d.v.required,d.v.min(1),d.v.maxLength(10)]],cost_per_km:[10,[d.v.required,d.v.min(1),d.v.maxLength(10)]],payable_amount:[0,[d.v.required,d.v.min(1),d.v.maxLength(10)]],sender_name:["",d.v.maxLength(100)],sender_mobile:["",d.v.maxLength(10)],sender_address:["",d.v.maxLength(255)],sender_pin:["",d.v.maxLength(20)],sender_landmark:["",d.v.maxLength(255)],sender_latitude:["",d.v.required],sender_longitude:["",d.v.required],receiver_name:["",d.v.maxLength(100)],receiver_mobile:["",d.v.maxLength(10)],receiver_address:["",d.v.maxLength(255)],receiver_pin:["",d.v.maxLength(20)],receiver_landmark:["",d.v.maxLength(255)],receiver_latitude:["",d.v.required],receiver_longitude:["",d.v.required]})}submit(e){if(e.preventDefault(),this.form.valid){const e=this.form.value;e.receiver_mobile&&(e.receiver_mobile="+91"+e.receiver_mobile),e.sender_mobile&&(e.sender_mobile="+91"+e.sender_mobile),this._ProgressBarService.show(),this._PickupService.addPickup(e).subscribe(e=>{this._ProgressBarService.hide(),e.success?(this._ToastService.info(e.message),this.dialogRef.close(!0),this.form.reset()):this._ToastService.error(e.message)})}}setCurrentLocation(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{this.latitudeSender=e.coords.latitude,this.longitudeSender=e.coords.longitude,this.zoomSender=8,this.getAddress(this.latitudeSender,this.longitudeSender,"SENDER"),this.latitudeReceiver=e.coords.latitude,this.longitudeReceiver=e.coords.longitude,this.zoomReceiver=8,this.getAddress(this.latitudeReceiver,this.longitudeReceiver,"RECEIVER")})}markerDragEnd(e,t){"SENDER"===t?(this.latitudeSender=e.latLng.lat(),this.longitudeSender=e.latLng.lng(),this.getAddress(this.latitudeSender,this.longitudeSender,t)):"RECEIVER"===t&&(this.latitudeReceiver=e.latLng.lat(),this.longitudeReceiver=e.latLng.lng(),this.getAddress(this.latitudeReceiver,this.longitudeReceiver,t))}getPin(e){let t=e.find(e=>e.types.includes("postal_code"));return(null==t?void 0:t.long_name)?null==t?void 0:t.long_name:null}getAddress(e,t,i){this.geoCoder.geocode({location:{lat:e,lng:t}},(a,r)=>{"OK"===r?a[0]?("SENDER"===i?(this.zoomSender=12,this.form.patchValue({sender_address:a[0].formatted_address,sender_latitude:e,sender_longitude:t,sender_pin:this.getPin(a[0].address_components)})):"RECEIVER"===i&&(this.zoomReceiver=12,this.form.patchValue({receiver_address:a[0].formatted_address,receiver_latitude:e,receiver_longitude:t,receiver_pin:this.getPin(a[0].address_components)})),this.calculateDistance()):this._ToastService.error("No results found"):this._ToastService.error("Geocoder failed due to: "+r)})}calculateDistance(){const e=new google.maps.LatLng(this.latitudeSender,this.longitudeSender),t=new google.maps.LatLng(this.latitudeReceiver,this.longitudeReceiver);(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[e],destinations:[t],travelMode:google.maps.TravelMode.TWO_WHEELER},(e,t)=>{var i,a;if("OK"===t&&e&&e.rows[0]){const t=null===(a=null===(i=e.rows[0])||void 0===i?void 0:i.elements[0])||void 0===a?void 0:a.distance.value;this.calculateAmount(null,t/1e3)}})}calculateAmount(e=null,t){e&&e.preventDefault(),this.form.patchValue({distance:t,payable_amount:(t*parseFloat(this.form.value.cost_per_km)).toFixed(2)})}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(b.g),n.Sb(d.d),n.Sb(m.a),n.Sb(u.a),n.Sb(f),n.Sb(v.d),n.Sb(n.A))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-save-pickup"]],viewQuery:function(e,t){var i;1&e&&(n.Mc(R,!0),n.Mc(w,!0)),2&e&&(n.vc(i=n.hc())&&(t.searchSenderElementRef=i.first),n.vc(i=n.hc())&&(t.searchReceiverElementRef=i.first))},decls:113,vars:16,consts:[["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-xs-12","col-md-6"],[1,"full-width"],["type","text","matInput","","placeholder","Sender Name","formControlName","sender_name"],["type","text","matInput","","placeholder","Sender Mobile","formControlName","sender_mobile"],[1,"col-xs-12"],["appearance","outline","floatLabel","auto",1,"full-width"],["type","text","matInput","","autocorrect","off","autocapitalize","off","spellcheck","off","type","text",3,"keydown.enter"],["searchSender",""],["matSuffix",""],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable","dragEnd"],["type","text","matInput","","placeholder","Sender Address","formControlName","sender_address","readonly",""],["type","text","matInput","","placeholder","Sender Pin","formControlName","sender_pin","readonly",""],["type","text","matInput","","placeholder","Sender Landmark","formControlName","sender_landmark"],[1,"col-xs-12","col-md-3"],["type","text","matInput","","placeholder","Sender Lat","formControlName","sender_latitude","readonly","","required",""],["type","text","matInput","","placeholder","Sender Long","formControlName","sender_longitude","readonly","","required",""],["type","text","matInput","","placeholder","Receiver Name","formControlName","receiver_name"],["type","text","matInput","","placeholder","Receiver Mobile","formControlName","receiver_mobile"],["searchReceiver",""],["type","text","matInput","","placeholder","Receiver Address","formControlName","receiver_address","readonly",""],["type","text","matInput","","placeholder","Receiver Pin","formControlName","receiver_pin","readonly",""],["type","text","matInput","","placeholder","Receiver Landmark","formControlName","receiver_landmark"],["type","text","matInput","","placeholder","Receiver Lat","formControlName","receiver_latitude","readonly","","required",""],["type","text","matInput","","placeholder","Receiver Long","formControlName","receiver_longitude","readonly","","required",""],["formControlName","payment_method","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","payer","required",""],["type","text","matInput","","placeholder","Item Type","formControlName","item_type"],["type","text","matInput","","placeholder","Product Name","formControlName","product_name"],["type","text","matInput","","placeholder","Weight","formControlName","weight"],[1,"col-xs-12","col-md-4"],["type","number","matInput","","placeholder","Cost per KM","formControlName","cost_per_km","required","",3,"change"],["type","text","matInput","","placeholder","Distance","formControlName","distance","readonly","","required",""],["type","text","matInput","","placeholder","Payable Amount","formControlName","payable_amount","required",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(n.Yb(0,"form",0),n.gc("submit",(function(e){return t.submit(e)})),n.Yb(1,"app-modal-header"),n.Gc(2,"Add Pickup "),n.Xb(),n.Yb(3,"app-modal-body"),n.Yb(4,"mat-card"),n.Yb(5,"mat-card-header"),n.Yb(6,"mat-card-title"),n.Gc(7,"Sender Detail"),n.Xb(),n.Xb(),n.Yb(8,"mat-card-content"),n.Yb(9,"div",1),n.Yb(10,"div",2),n.Yb(11,"mat-form-field",3),n.Tb(12,"input",4),n.Xb(),n.Xb(),n.Yb(13,"div",2),n.Yb(14,"mat-form-field",3),n.Tb(15,"input",5),n.Xb(),n.Xb(),n.Yb(16,"div",6),n.Yb(17,"mat-form-field",7),n.Yb(18,"mat-label"),n.Gc(19,"Search Sender Location"),n.Xb(),n.Yb(20,"input",8,9),n.gc("keydown.enter",(function(e){return e.preventDefault()})),n.Xb(),n.Yb(22,"mat-icon",10),n.Gc(23,"search"),n.Xb(),n.Xb(),n.Yb(24,"agm-map",11),n.Yb(25,"agm-marker",12),n.gc("dragEnd",(function(e){return t.markerDragEnd(e,"SENDER")})),n.Xb(),n.Xb(),n.Xb(),n.Yb(26,"div",2),n.Yb(27,"mat-form-field",3),n.Tb(28,"input",13),n.Xb(),n.Xb(),n.Yb(29,"div",2),n.Yb(30,"mat-form-field",3),n.Tb(31,"input",14),n.Xb(),n.Xb(),n.Yb(32,"div",2),n.Yb(33,"mat-form-field",3),n.Tb(34,"input",15),n.Xb(),n.Xb(),n.Yb(35,"div",16),n.Yb(36,"mat-form-field",3),n.Tb(37,"input",17),n.Xb(),n.Xb(),n.Yb(38,"div",16),n.Yb(39,"mat-form-field",3),n.Tb(40,"input",18),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Yb(41,"mat-card"),n.Yb(42,"mat-card-header"),n.Yb(43,"mat-card-title"),n.Gc(44,"Receiver Detail"),n.Xb(),n.Xb(),n.Yb(45,"mat-card-content"),n.Yb(46,"div",1),n.Yb(47,"div",2),n.Yb(48,"mat-form-field",3),n.Tb(49,"input",19),n.Xb(),n.Xb(),n.Yb(50,"div",2),n.Yb(51,"mat-form-field",3),n.Tb(52,"input",20),n.Xb(),n.Xb(),n.Yb(53,"div",6),n.Yb(54,"mat-form-field",7),n.Yb(55,"mat-label"),n.Gc(56,"Search Receiver Location"),n.Xb(),n.Yb(57,"input",8,21),n.gc("keydown.enter",(function(e){return e.preventDefault()})),n.Xb(),n.Xb(),n.Yb(59,"agm-map",11),n.Yb(60,"agm-marker",12),n.gc("dragEnd",(function(e){return t.markerDragEnd(e,"RECEIVER")})),n.Xb(),n.Xb(),n.Xb(),n.Yb(61,"div",2),n.Yb(62,"mat-form-field",3),n.Tb(63,"input",22),n.Xb(),n.Xb(),n.Yb(64,"div",2),n.Yb(65,"mat-form-field",3),n.Tb(66,"input",23),n.Xb(),n.Xb(),n.Yb(67,"div",2),n.Yb(68,"mat-form-field",3),n.Tb(69,"input",24),n.Xb(),n.Xb(),n.Yb(70,"div",16),n.Yb(71,"mat-form-field",3),n.Tb(72,"input",25),n.Xb(),n.Xb(),n.Yb(73,"div",16),n.Yb(74,"mat-form-field",3),n.Tb(75,"input",26),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Yb(76,"div",1),n.Yb(77,"div",2),n.Yb(78,"mat-form-field",3),n.Yb(79,"mat-label"),n.Gc(80,"Payment Method"),n.Xb(),n.Yb(81,"mat-select",27),n.Ec(82,x,2,2,"mat-option",28),n.Xb(),n.Xb(),n.Xb(),n.Yb(83,"div",2),n.Yb(84,"mat-form-field",3),n.Yb(85,"mat-label"),n.Gc(86,"Payer"),n.Xb(),n.Yb(87,"mat-select",29),n.Ec(88,T,2,2,"mat-option",28),n.Xb(),n.Xb(),n.Xb(),n.Yb(89,"div",2),n.Yb(90,"mat-form-field",3),n.Tb(91,"input",30),n.Xb(),n.Xb(),n.Yb(92,"div",2),n.Yb(93,"mat-form-field",3),n.Tb(94,"input",31),n.Xb(),n.Xb(),n.Yb(95,"div",2),n.Yb(96,"mat-form-field",3),n.Tb(97,"input",32),n.Xb(),n.Xb(),n.Xb(),n.Yb(98,"div",1),n.Yb(99,"div",33),n.Yb(100,"mat-form-field",3),n.Yb(101,"input",34),n.gc("change",(function(e){return t.calculateAmount(e,t.form.value.distance)})),n.Xb(),n.Xb(),n.Xb(),n.Yb(102,"div",33),n.Yb(103,"mat-form-field",3),n.Tb(104,"input",35),n.Yb(105,"span",10),n.Gc(106,"KM"),n.Xb(),n.Xb(),n.Xb(),n.Yb(107,"div",33),n.Yb(108,"mat-form-field",3),n.Tb(109,"input",36),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Yb(110,"app-modal-action"),n.Yb(111,"button",37),n.gc("click",(function(e){return t.submit(e)})),n.Gc(112,"Save"),n.Xb(),n.Xb(),n.Xb()),2&e&&(n.qc("formGroup",t.form),n.Gb(24),n.qc("latitude",t.latitudeSender)("longitude",t.longitudeSender)("zoom",t.zoomSender),n.Gb(1),n.qc("latitude",t.latitudeSender)("longitude",t.longitudeSender)("markerDraggable",!0),n.Gb(34),n.qc("latitude",t.latitudeReceiver)("longitude",t.longitudeReceiver)("zoom",t.zoomReceiver),n.Gb(1),n.qc("latitude",t.latitudeReceiver)("longitude",t.longitudeReceiver)("markerDraggable",!0),n.Gb(22),n.qc("ngForOf",t.paymentMethods),n.Gb(6),n.qc("ngForOf",t.payerTypes),n.Gb(23),n.qc("disabled",t._ProgressBarService.inProgress()||t.form.invalid))},directives:[d.w,d.p,d.i,X.a,Y.a,_.a,_.d,_.f,_.c,S.b,y.a,d.b,d.o,d.g,S.f,G.a,S.h,v.b,v.c,d.u,C.a,a.l,d.s,P.a,k.b,E.k],styles:["agm-map[_ngcontent-%COMP%]{height:300px}"]}),e})();var D=i("d8ZS");function N(e,t){if(1&e&&(n.Yb(0,"mat-option",6),n.Gc(1),n.Xb()),2&e){const e=t.$implicit;n.qc("value",e.carrier_id),n.Gb(1),n.Kc(" ",e.name," | ",e.mobile_number," | Orders:",e.no_of_active_orders," ")}}let q=(()=>{class e{constructor(e,t,i,a,r,n,o){this.dialogRef=e,this.modalData=t,this._formBuilder=i,this._PickupService=a,this._CarrierService=r,this._ToastService=n,this._ProgressBarService=o,this.carriers=[],r.getAvailableCarriers().subscribe(e=>{this.carriers=e})}ngOnInit(){this.form=this._formBuilder.group({id:[this.modalData.pickup.id,d.v.required],carrier_id:["",d.v.required]})}submit(e){if(e.preventDefault(),this.form.valid){const e=this.form.value;this._ProgressBarService.show(),this._PickupService.assignPickup(e).subscribe(e=>{e.success?(this._ToastService.info(e.message),this.dialogRef.close(!0)):this._ToastService.error(e.message),this._ProgressBarService.hide()})}}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(b.g),n.Sb(b.a),n.Sb(d.d),n.Sb(f),n.Sb(D.a),n.Sb(u.a),n.Sb(m.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-assign-pickup"]],decls:14,vars:5,consts:[["autocomplete","off",3,"formGroup","submit"],[1,"full-width"],["matPrefix","","color","primary",2,"margin-right","20px"],["formControlName","carrier_id"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(n.Yb(0,"form",0),n.gc("submit",(function(e){return t.submit(e)})),n.Yb(1,"app-modal-header"),n.Gc(2),n.Xb(),n.Yb(3,"app-modal-body"),n.Yb(4,"mat-form-field",1),n.Yb(5,"mat-label"),n.Gc(6,"Select carrier (delivery boy)"),n.Xb(),n.Yb(7,"mat-icon",2),n.Gc(8,"local_shipping"),n.Xb(),n.Yb(9,"mat-select",3),n.Ec(10,N,2,4,"mat-option",4),n.Xb(),n.Xb(),n.Xb(),n.Yb(11,"app-modal-action"),n.Yb(12,"button",5),n.gc("click",(function(e){return t.submit(e)})),n.Gc(13,"Assign"),n.Xb(),n.Xb(),n.Xb()),2&e&&(n.qc("formGroup",t.form),n.Gb(2),n.Jc("Assign ",t.modalData.pickup.id," (available carrier ",t.carriers.length,") "),n.Gb(8),n.qc("ngForOf",t.carriers),n.Gb(2),n.qc("disabled",t._ProgressBarService.inProgress()||t.form.invalid))},directives:[d.w,d.p,d.i,X.a,Y.a,S.b,S.f,G.a,S.g,C.a,d.o,d.g,a.l,P.a,k.b,E.k],styles:[""]}),e})();var L=i("Qu3c"),O=i("EYlX");function A(e,t){1&e&&(n.Yb(0,"th",26),n.Gc(1," Tran.ID# "),n.Xb())}function M(e,t){1&e&&(n.Yb(0,"mat-icon",32),n.Gc(1,"verified_user"),n.Xb())}function z(e,t){1&e&&(n.Yb(0,"mat-icon",33),n.Gc(1,"error"),n.Xb())}function H(e,t){1&e&&(n.Yb(0,"mat-icon",34),n.Gc(1,"pending"),n.Xb())}function V(e,t){if(1&e&&(n.Yb(0,"td",27),n.Gc(1),n.Wb(2,28),n.Ec(3,M,2,0,"mat-icon",29),n.Ec(4,z,2,0,"mat-icon",30),n.Ec(5,H,2,0,"mat-icon",31),n.Vb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(1),n.Ic(" ",e.id," "),n.Gb(1),n.qc("ngSwitch",e.transaction_status),n.Gb(1),n.qc("ngSwitchCase","Success"),n.Gb(1),n.qc("ngSwitchCase","Failed"),n.Gb(1),n.qc("ngSwitchCase","Pending")}}function F(e,t){1&e&&(n.Yb(0,"th",35),n.Gc(1," Sender "),n.Xb())}function K(e,t){1&e&&(n.Yb(0,"mat-icon",40),n.Gc(1,"monetization_on"),n.Xb())}function B(e,t){if(1&e&&(n.Yb(0,"td",27),n.Yb(1,"div",36),n.Ec(2,K,2,0,"mat-icon",37),n.Yb(3,"span"),n.Gc(4),n.Xb(),n.Xb(),n.Yb(5,"div",38),n.Yb(6,"span"),n.Gc(7),n.Xb(),n.Xb(),n.Yb(8,"div",39),n.Yb(9,"span"),n.Gc(10),n.Xb(),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(2),n.qc("ngIf","SENDER"===e.payer),n.Gb(2),n.Hc(e.sender_name),n.Gb(3),n.Hc(e.sender_address),n.Gb(3),n.Hc(e.sender_mobile)}}function j(e,t){1&e&&(n.Yb(0,"th",35),n.Gc(1," Receiver "),n.Xb())}function W(e,t){1&e&&(n.Yb(0,"mat-icon",42),n.Gc(1,"monetization_on"),n.Xb())}function $(e,t){if(1&e&&(n.Yb(0,"td",27),n.Yb(1,"div",36),n.Ec(2,W,2,0,"mat-icon",41),n.Yb(3,"span"),n.Gc(4),n.Xb(),n.Xb(),n.Yb(5,"div",38),n.Yb(6,"span"),n.Gc(7),n.Xb(),n.Xb(),n.Yb(8,"div",39),n.Yb(9,"span"),n.Gc(10),n.Xb(),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(2),n.qc("ngIf","RECEIVER"===e.payer),n.Gb(2),n.Hc(e.receiver_name),n.Gb(3),n.Hc(e.receiver_address),n.Gb(3),n.Hc(e.receiver_mobile)}}function U(e,t){1&e&&(n.Yb(0,"th",43),n.Gc(1," Payment "),n.Xb())}function J(e,t){if(1&e&&(n.Yb(0,"td",27),n.Yb(1,"div"),n.Gc(2),n.lc(3,"currency"),n.Xb(),n.Yb(4,"div",38),n.Gc(5," Mode: "),n.Yb(6,"strong"),n.Gc(7),n.Xb(),n.Xb(),n.Yb(8,"div",38),n.Gc(9," Distance: "),n.Yb(10,"strong"),n.Gc(11),n.Xb(),n.Gc(12," KM "),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(2),n.Hc(n.nc(3,3,e.payable_amount,"INR")),n.Gb(5),n.Hc(e.payment_method),n.Gb(4),n.Hc(e.distance)}}function Q(e,t){1&e&&(n.Yb(0,"th",26),n.Gc(1," Item "),n.Xb())}function Z(e,t){if(1&e&&(n.Yb(0,"td",27),n.Yb(1,"div",36),n.Gc(2),n.Xb(),n.Yb(3,"div",38),n.Gc(4),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(2),n.Ic(" ",e.item_type," "),n.Gb(2),n.Ic(" ",e.product_name," ")}}function ee(e,t){1&e&&(n.Yb(0,"th",26),n.Gc(1," Status "),n.Xb())}function te(e,t){if(1&e&&(n.Yb(0,"td",27),n.Yb(1,"span",36),n.Gc(2),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(2),n.Hc(e.status)}}function ie(e,t){1&e&&(n.Yb(0,"th",44),n.Gc(1," Dates "),n.Xb())}function ae(e,t){if(1&e&&(n.Yb(0,"td",27),n.Yb(1,"div",38),n.Gc(2," Placed: "),n.Yb(3,"strong"),n.Gc(4),n.lc(5,"date"),n.Xb(),n.Xb(),n.Yb(6,"div",38),n.Gc(7," Assigned: "),n.Yb(8,"strong"),n.Gc(9),n.lc(10,"date"),n.Xb(),n.Xb(),n.Yb(11,"div",38),n.Gc(12," Pickup: "),n.Yb(13,"strong"),n.Gc(14),n.lc(15,"date"),n.Xb(),n.Xb(),n.Yb(16,"div",38),n.Gc(17," Finished: "),n.Yb(18,"strong"),n.Gc(19),n.lc(20,"date"),n.Xb(),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Gb(4),n.Hc(n.nc(5,4,e.created_at,"short")),n.Gb(5),n.Hc(n.nc(10,7,e.assigned_on,"short")),n.Gb(5),n.Hc(n.nc(15,10,e.pickup_on,"short")),n.Gb(5),n.Hc(n.nc(20,13,e.completed_on,"short"))}}function re(e,t){1&e&&(n.Yb(0,"th",45),n.Gc(1," Action "),n.Xb())}function ne(e,t){if(1&e){const e=n.Zb();n.Yb(0,"td",27),n.Yb(1,"button",46),n.gc("click",(function(){n.yc(e);const i=t.$implicit;return n.kc().assign(i)})),n.Yb(2,"mat-icon"),n.Gc(3,"local_shipping"),n.Xb(),n.Gc(4," Assign "),n.Xb(),n.Tb(5,"app-track-carrier",47),n.Xb()}if(2&e){const e=t.$implicit;n.Gb(1),n.qc("disabled","PENDING"!==e.status),n.Gb(4),n.qc("carrierId",e.carrier_id)("disabled","IN_TRANSIT"!==e.status)("label","Tracking "+e.id)}}function oe(e,t){1&e&&n.Tb(0,"tr",48)}function ce(e,t){1&e&&n.Tb(0,"tr",49)}let se=(()=>{let e=class{constructor(e,t,i,a){this.dialog=e,this._ProgressBarService=t,this._PickupService=i,this._ToastService=a,this.displayedColumns=["id","sender_name","receiver_name","payable_amount","item_type","status","dates","action"],this.length=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,100]}ngOnInit(){this.dataSource=new s.k([]),this.getAllPickups()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getAllPickups(){this._ProgressBarService.show(),this._PickupService.getAllPickups().subscribe(e=>{this.length=e.length,this.dataSource.data=e,this.dataSource.paginator=this.paginator,this._ProgressBarService.hide()})}addPickup(){this.dialog.open(I,{width:"800px",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getAllPickups()})}assign(e){this.dialog.open(q,{width:"600px",disableClose:!0,data:{pickup:e}}).afterClosed().subscribe(e=>{e&&this.getAllPickups()})}};return e.\u0275fac=function(t){return new(t||e)(n.Sb(b.b),n.Sb(m.a),n.Sb(f),n.Sb(u.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-pickup-list"]],viewQuery:function(e,t){var i;1&e&&n.Mc(c.a,!0),2&e&&n.vc(i=n.hc())&&(t.paginator=i.first)},decls:41,vars:7,consts:[[2,"padding","8px"],[1,"row"],[1,"col-xs-12","col-md-4"],["mat-button","","color","primary",3,"click"],[1,"col-xs-12","col-md-4",2,"text-align","right"],["matInput","","placeholder","Search order","autocomplete","off",3,"keyup"],["input",""],[1,"table-container","mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","id","mat-sort-header",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sender_name","mat-sort-header",""],["mat-header-cell","","style","width: 260px;",4,"matHeaderCellDef"],["matColumnDef","receiver_name","mat-sort-header",""],["matColumnDef","payable_amount"],["mat-header-cell","","style","width: 100px;",4,"matHeaderCellDef"],["matColumnDef","item_type"],["matColumnDef","status"],["matColumnDef","dates"],["mat-header-cell","","style","width: 160px;",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","","style","width: 80px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch"],["class","success","matTooltip","Transaction verified","matTooltipPosition","right",4,"ngSwitchCase"],["class","failed","matTooltip","Transaction failed","matTooltipPosition","right",4,"ngSwitchCase"],["class","pending","matTooltip","Transaction status pending","matTooltipPosition","right",4,"ngSwitchCase"],["matTooltip","Transaction verified","matTooltipPosition","right",1,"success"],["matTooltip","Transaction failed","matTooltipPosition","right",1,"failed"],["matTooltip","Transaction status pending","matTooltipPosition","right",1,"pending"],["mat-header-cell","",2,"width","260px"],[1,"name"],["matTooltip","Payable by Sender","class","payer",4,"ngIf"],[1,"address"],[1,"mobile"],["matTooltip","Payable by Sender",1,"payer"],["matTooltip","Payable by Receiver","class","payer",4,"ngIf"],["matTooltip","Payable by Receiver",1,"payer"],["mat-header-cell","",2,"width","100px"],["mat-header-cell","",2,"width","160px"],["mat-header-cell","",2,"width","80px"],["mat-button","","color","primary","aria-label","Assign","matTooltip","Assign the pickup to a delivery boy",3,"disabled","click"],[3,"carrierId","disabled","label"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(n.Yb(0,"div",0),n.Yb(1,"div",1),n.Yb(2,"div",2),n.Yb(3,"button",3),n.gc("click",(function(){return t.addPickup()})),n.Yb(4,"mat-icon"),n.Gc(5,"add"),n.Xb(),n.Gc(6," Add Pickup "),n.Xb(),n.Xb(),n.Tb(7,"div",2),n.Yb(8,"div",4),n.Yb(9,"mat-form-field"),n.Yb(10,"input",5,6),n.gc("keyup",(function(e){return t.applyFilter(e)})),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Xb(),n.Yb(12,"div",7),n.Yb(13,"table",8),n.Wb(14,9),n.Ec(15,A,2,0,"th",10),n.Ec(16,V,6,5,"td",11),n.Vb(),n.Wb(17,12),n.Ec(18,F,2,0,"th",13),n.Ec(19,B,11,4,"td",11),n.Vb(),n.Wb(20,14),n.Ec(21,j,2,0,"th",13),n.Ec(22,$,11,4,"td",11),n.Vb(),n.Wb(23,15),n.Ec(24,U,2,0,"th",16),n.Ec(25,J,13,6,"td",11),n.Vb(),n.Wb(26,17),n.Ec(27,Q,2,0,"th",10),n.Ec(28,Z,5,2,"td",11),n.Vb(),n.Wb(29,18),n.Ec(30,ee,2,0,"th",10),n.Ec(31,te,3,1,"td",11),n.Vb(),n.Wb(32,19),n.Ec(33,ie,2,0,"th",20),n.Ec(34,ae,21,16,"td",11),n.Vb(),n.Wb(35,21),n.Ec(36,re,2,0,"th",22),n.Ec(37,ne,6,4,"td",11),n.Vb(),n.Ec(38,oe,1,0,"tr",23),n.Ec(39,ce,1,0,"tr",24),n.Xb(),n.Xb(),n.Yb(40,"mat-paginator",25),n.gc("page",(function(e){return t.pageEvent=e})),n.Xb()),2&e&&(n.Gb(13),n.qc("dataSource",t.dataSource),n.Gb(25),n.qc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),n.Gb(1),n.qc("matRowDefColumns",t.displayedColumns),n.Gb(1),n.qc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[k.b,G.a,S.b,y.a,s.j,s.c,s.e,s.b,s.g,s.i,c.a,s.d,s.a,a.o,a.p,L.a,a.m,O.a,s.f,s.h],pipes:[a.d,a.f],styles:[".address[_ngcontent-%COMP%], .mobile[_ngcontent-%COMP%], .name[_ngcontent-%COMP%], .payer[_ngcontent-%COMP%]{cursor:default;font-size:10px;text-overflow:ellipsis;overflow:hidden;padding:2px}.name[_ngcontent-%COMP%]{font-weight:500;font-size:12px}.mobile[_ngcontent-%COMP%]{color:#1e88e5}.payer[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:20px;color:green}"]}),e=Object(o.a)([Object(l.a)()],e),e})();const le=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-pickup-management"]],decls:1,vars:0,template:function(e,t){1&e&&n.Tb(0,"app-pickup-list")},directives:[se],styles:[""]}),e})()}];let de=(()=>{class e{}return e.\u0275mod=n.Qb({type:e}),e.\u0275inj=n.Pb({factory:function(t){return new(t||e)},imports:[[r.e.forChild(le)],r.e]}),e})();var be=i("PCNd");let me=(()=>{class e{}return e.\u0275mod=n.Qb({type:e}),e.\u0275inj=n.Pb({factory:function(t){return new(t||e)},imports:[[a.c,de,be.a.forRoot()]]}),e})()},Olgc:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var a=i("fXoL"),r=i("dNgK");let n=(()=>{class e{constructor(e){this.snackbar=e,this.defaultConfig={horizontalPosition:"right",verticalPosition:"bottom",duration:6e3}}info(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"primary"}))}error(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"warn"}))}warning(e){this.snackbar.open(e,"Okay",Object.assign(Object.assign({},this.defaultConfig),{panelClass:"accent"}))}}return e.\u0275fac=function(t){return new(t||e)(a.cc(r.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
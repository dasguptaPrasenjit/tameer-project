(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"7adh":function(e,t,r){"use strict";r.r(t),r.d(t,"UserManagementModule",(function(){return be}));var i=r("ofXK"),a=r("tyNb"),o=r("fXoL"),s=r("wZkO"),n=r("M9IT"),c=r("0IaG"),l=r("3Pt+"),d=r("aR35"),b=r("UJjo"),u=r("Olgc"),m=r("2hTz"),p=r("7dP1");let f=(()=>{class e{constructor(e){this._authService=e}}return e.\u0275fac=function(t){return new(t||e)(o.cc(p.a))},e.\u0275prov=o.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=r("Kj3r"),g=r("IzEk"),v=r("eIep"),S=r("lJxs"),X=r("LRne");let y=(()=>{class e{constructor(e,t){this._userService=e,this._progressBarService=t}existingEmailValidator(e=""){return t=>""===t.value||t.value===e?Object(X.a)(null):t.valueChanges.pipe(Object(h.a)(500),Object(g.a)(1),Object(v.a)(()=>(this._progressBarService.show(),this._userService.getUserByEmail(t.value).pipe(Object(S.a)(e=>(this._progressBarService.hide(),e?{existingEmail:"Email address already in use"}:null))))))}}return e.\u0275fac=function(t){return new(t||e)(o.cc(m.a),o.cc(b.a))},e.\u0275prov=o.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=r("vAVV"),Y=r("XkPD"),w=r("r1eF"),C=r("SIeF"),G=r("kmnG"),q=r("d3UM"),E=r("qFsG"),I=r("W/tz"),k=r("pJxS"),T=r("bTqV"),x=r("FKr1"),V=r("NFeN"),O=r("Us6y");function D(e,t){if(1&e&&(o.Yb(0,"mat-option",17),o.Gc(1),o.Xb()),2&e){const e=t.$implicit;o.qc("value",e.id),o.Gb(1),o.Ic(" ",e.name," ")}}function P(e,t){1&e&&(o.Yb(0,"div",2),o.Yb(1,"mat-form-field",3),o.Tb(2,"input",18),o.Xb(),o.Xb())}function N(e,t){1&e&&(o.Yb(0,"div",2),o.Yb(1,"mat-form-field",3),o.Tb(2,"input",19),o.Xb(),o.Xb())}function B(e,t){1&e&&(o.Yb(0,"div",2),o.Yb(1,"mat-form-field",3),o.Tb(2,"input",20),o.Xb(),o.Xb())}function F(e,t){if(1&e){const e=o.Zb();o.Yb(0,"span"),o.Gc(1),o.lc(2,"textTruncate"),o.Yb(3,"mat-icon",21),o.gc("click",(function(){return o.yc(e),o.kc().removeFile()})),o.Gc(4,"cancel"),o.Xb(),o.Xb()}if(2&e){const e=o.kc();var r;o.Gb(1),o.Ic(" ",o.nc(2,1,null==(r=e.form.get("vendor_image"))?null:r.value,15)," ")}}const R=function(){return[".jpg",".jpeg",".png"]};let U=(()=>{class e{constructor(e,t,r,i,a,o,s,n,c,l){if(this.fb=e,this.progressBarService=t,this.dialogRef=r,this.userToEdit=i,this._toastService=a,this._userService=o,this._utilityService=s,this._emailValidatorService=n,this._CategoryService=c,this._UploaderService=l,this.error=null,this.genderOptions=d.b,this.categories=[],this.getParentCategories(),this.createForm(),this.userToEdit){let e=this.userToEdit.user;e.mobile_number&&(e.mobile_number=e.mobile_number.substring(3)),this.form.patchValue(e)}}createForm(){this.form=this.fb.group({name:["",l.v.required],mobile_number:["",l.v.required],shop_name:["",l.v.required],category_id:["",l.v.required],address:["",l.v.required],city:["",l.v.required],state:["",l.v.required],zip:["",l.v.required],vendor_image:["",l.v.required]}),this.userToEdit||(this.form.addControl("email",new l.e("",[l.v.required,l.v.email])),this.form.addControl("password",new l.e("",l.v.required)),this.form.addControl("confirm_password",new l.e("",l.v.required)))}ngOnInit(){}getParentCategories(){this.progressBarService.show(),this._CategoryService.getParentCategories().subscribe(e=>{this.categories=e,this.progressBarService.hide()})}fileChanged(e){let t=new FormData;t.append("filenames[]",e.target.files[0]),t.append("type","vendor"),this.progressBarService.show(),this._UploaderService.upload(t).subscribe(e=>{this.progressBarService.hide(),e&&this.form.patchValue({vendor_image:e})})}removeFile(){this.form.patchValue({vendor_image:""})}submit(e){e.preventDefault(),this.form.valid&&(this.user=this.form.value,this.progressBarService.show(),this.userToEdit?this._userService.updateUser(this.userToEdit.user.user_id,this.user).subscribe(e=>{this.progressBarService.hide(),e.error?this._toastService.info(e.message):(this.form.reset(),this.dialogRef.close(!0),this._toastService.info("User updated successfully"))},e=>{this.progressBarService.hide(),this._toastService.error((null==e?void 0:e.message)||"Unable to update user")}):this._userService.register(this.user).subscribe(e=>{this.progressBarService.hide(),e.error?this._toastService.info(e.message):(this.form.reset(),this.dialogRef.close(!0),this._toastService.info("User created successfully"))},e=>{this.progressBarService.hide(),this._toastService.error((null==e?void 0:e.message)||"Unable to create user")}))}reset(){this.createForm(),this.form.markAsPristine()}}return e.\u0275fac=function(t){return new(t||e)(o.Sb(l.d),o.Sb(b.a),o.Sb(c.g),o.Sb(c.a),o.Sb(u.a),o.Sb(m.a),o.Sb(f),o.Sb(y),o.Sb(_.a),o.Sb(Y.a))},e.\u0275cmp=o.Mb({type:e,selectors:[["app-save-admin-user"]],decls:42,vars:10,consts:[["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-xs-12","col-md-6"],[1,"full-width"],["formControlName","category_id","required",""],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Name","formControlName","name","required",""],["class","col-xs-12 col-md-6",4,"ngIf"],["type","text","matInput","","placeholder","Mobile Number","formControlName","mobile_number","required",""],["type","text","matInput","","placeholder","Shop Name","formControlName","shop_name","required",""],["type","text","matInput","","placeholder","Address","formControlName","address","required",""],["type","text","matInput","","placeholder","City","formControlName","city","required",""],["type","text","matInput","","placeholder","State","formControlName","state","required",""],["type","text","matInput","","placeholder","Zip","formControlName","zip","required",""],[3,"fileTypes","change"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],["type","text","matInput","","placeholder","Email","formControlName","email","required",""],["type","password","matInput","","placeholder","Password","formControlName","password","required",""],["type","password","matInput","","placeholder","Confirm Password","formControlName","confirm_password","required",""],[3,"click"]],template:function(e,t){if(1&e&&(o.Yb(0,"form",0),o.gc("submit",(function(e){return t.submit(e)})),o.Yb(1,"app-modal-header"),o.Gc(2),o.Xb(),o.Yb(3,"app-modal-body"),o.Yb(4,"div",1),o.Yb(5,"div",2),o.Yb(6,"mat-form-field",3),o.Yb(7,"mat-label"),o.Gc(8,"Category"),o.Xb(),o.Yb(9,"mat-select",4),o.Ec(10,D,2,2,"mat-option",5),o.Xb(),o.Xb(),o.Xb(),o.Yb(11,"div",2),o.Yb(12,"mat-form-field",3),o.Tb(13,"input",6),o.Xb(),o.Xb(),o.Ec(14,P,3,0,"div",7),o.Yb(15,"div",2),o.Yb(16,"mat-form-field",3),o.Tb(17,"input",8),o.Xb(),o.Xb(),o.Ec(18,N,3,0,"div",7),o.Ec(19,B,3,0,"div",7),o.Yb(20,"div",2),o.Yb(21,"mat-form-field",3),o.Tb(22,"input",9),o.Xb(),o.Xb(),o.Yb(23,"div",2),o.Yb(24,"mat-form-field",3),o.Tb(25,"input",10),o.Xb(),o.Xb(),o.Yb(26,"div",2),o.Yb(27,"mat-form-field",3),o.Tb(28,"input",11),o.Xb(),o.Xb(),o.Yb(29,"div",2),o.Yb(30,"mat-form-field",3),o.Tb(31,"input",12),o.Xb(),o.Xb(),o.Yb(32,"div",2),o.Yb(33,"mat-form-field",3),o.Tb(34,"input",13),o.Xb(),o.Xb(),o.Yb(35,"div",2),o.Yb(36,"div",3),o.Yb(37,"app-file-browser",14),o.gc("change",(function(e){return t.fileChanged(e)})),o.Xb(),o.Ec(38,F,5,4,"span",15),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(39,"app-modal-action"),o.Yb(40,"button",16),o.gc("click",(function(e){return t.submit(e)})),o.Gc(41,"Save"),o.Xb(),o.Xb(),o.Xb()),2&e){var r;const e=null==(r=t.form.get("vendor_image"))?null:r.value;o.qc("formGroup",t.form),o.Gb(2),o.Ic("",t.userToEdit?"Save":"Add New"," Vendor"),o.Gb(8),o.qc("ngForOf",t.categories),o.Gb(4),o.qc("ngIf",!t.userToEdit),o.Gb(4),o.qc("ngIf",!t.userToEdit),o.Gb(1),o.qc("ngIf",!t.userToEdit),o.Gb(18),o.qc("fileTypes",o.sc(9,R)),o.Gb(1),o.qc("ngIf",e),o.Gb(2),o.qc("disabled",t.form.invalid||t.progressBarService.inProgress())}},directives:[l.w,l.p,l.i,w.a,C.a,G.b,G.f,q.a,l.o,l.g,l.u,i.l,E.a,l.b,i.m,I.a,k.a,T.b,x.k,V.a],pipes:[O.a],styles:["section[_ngcontent-%COMP%]{display:table;margin:8px}section[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]{display:table-cell}.grid-tile[_ngcontent-%COMP%]{padding:10px}"]}),e})();var z=r("+0xr"),M=r("Dh3D"),j=r("R6Eq");function $(e,t){1&e&&(o.Yb(0,"th",20),o.Gc(1," Name "),o.Xb())}function A(e,t){if(1&e&&(o.Yb(0,"td",21),o.Gc(1),o.Xb()),2&e){const e=t.$implicit;o.Gb(1),o.Ic(" ",e.name,"")}}function W(e,t){1&e&&(o.Yb(0,"th",20),o.Gc(1," Email "),o.Xb())}function H(e,t){if(1&e&&(o.Yb(0,"td",21),o.Gc(1),o.Xb()),2&e){const e=t.$implicit;o.Gb(1),o.Ic(" ",e.user_email," ")}}function J(e,t){1&e&&(o.Yb(0,"th",20),o.Gc(1," Shop "),o.Xb())}function Z(e,t){if(1&e&&(o.Yb(0,"td",21),o.Gc(1),o.Xb()),2&e){const e=t.$implicit;o.Gb(1),o.Ic(" ",e.shop_name," ")}}function K(e,t){1&e&&(o.Yb(0,"th",20),o.Gc(1," Category "),o.Xb())}function L(e,t){if(1&e&&(o.Yb(0,"td",21),o.Gc(1),o.Xb()),2&e){const e=t.$implicit;o.Gb(1),o.Ic(" ",e.category_name," ")}}function Q(e,t){1&e&&(o.Yb(0,"th",20),o.Gc(1," Address "),o.Xb())}function ee(e,t){if(1&e&&(o.Yb(0,"td",21),o.Gc(1),o.Xb()),2&e){const e=t.$implicit;o.Gb(1),o.Ic(" ",e.address," ")}}function te(e,t){1&e&&(o.Yb(0,"th",22),o.Gc(1," Action "),o.Xb())}function re(e,t){if(1&e){const e=o.Zb();o.Yb(0,"td",21),o.Yb(1,"button",23),o.gc("click",(function(){o.yc(e);const r=t.$implicit;return o.kc().editUser(r)})),o.Yb(2,"mat-icon"),o.Gc(3,"edit"),o.Xb(),o.Gc(4," Edit "),o.Xb(),o.Yb(5,"button",24),o.gc("click",(function(){o.yc(e);const r=t.$implicit;return o.kc().remove(r)})),o.Yb(6,"mat-icon"),o.Gc(7,"delete"),o.Xb(),o.Gc(8," Delete "),o.Xb(),o.Xb()}if(2&e){const e=t.$implicit;o.Gb(1),o.qc("disabled",0==e.is_active),o.Gb(4),o.qc("disabled",0==e.is_active)}}function ie(e,t){1&e&&o.Tb(0,"tr",25)}const ae=function(e){return{deleted:e}};function oe(e,t){1&e&&o.Tb(0,"tr",26),2&e&&o.qc("ngClass",o.tc(1,ae,0==t.$implicit.is_active))}let se=(()=>{class e{constructor(e,t,r,i){this._userService=e,this.dialog=t,this._ProgressBarService=r,this._ToastService=i,this.displayedColumns=["name","user_email","shop_name","category_name","address","action"],this.length=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,100]}ngOnInit(){this.dataSource=new z.k([]),this.getVendors()}getVendors(){this._ProgressBarService.show(),this._userService.getAllVendors().subscribe(e=>{this.length=e.length,this.dataSource.data=e,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this._ProgressBarService.hide()})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}addUser(){this.dialog.open(U,{width:"600px",disableClose:!0}).afterClosed().subscribe(e=>{e&&this.getVendors()})}editUser(e){this.dialog.open(U,{width:"600px",disableClose:!0,data:{user:e}}).afterClosed().subscribe(e=>{e&&this.getVendors()})}remove(e){this.dialog.open(j.a,{width:"600px",disableClose:!0,data:{message:"Removing the vendor. Click Ok to continue."}}).afterClosed().subscribe(t=>{t&&(this._ProgressBarService.show(),this._userService.removeVendor({vendorid:e.vendor_id}).subscribe(e=>{this._ToastService.info(e.message),this.getVendors()}))})}}return e.\u0275fac=function(t){return new(t||e)(o.Sb(m.a),o.Sb(c.b),o.Sb(b.a),o.Sb(u.a))},e.\u0275cmp=o.Mb({type:e,selectors:[["app-list-admin-user"]],viewQuery:function(e,t){var r;1&e&&(o.Mc(n.a,!0),o.Mc(M.a,!0)),2&e&&(o.vc(r=o.hc())&&(t.paginator=r.first),o.vc(r=o.hc())&&(t.sort=r.first))},decls:33,vars:7,consts:[[1,"row",2,"margin","0"],[1,"col-xs-6"],["mat-button","","color","primary",3,"click"],[1,"col-xs-6",2,"text-align","right"],["matInput","","placeholder","Search","autocomplete","off",3,"keyup"],["input",""],[1,"table-container","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user_email"],["matColumnDef","shop_name"],["matColumnDef","category_name"],["matColumnDef","address"],["matColumnDef","action"],["mat-header-cell","","style","width: 160px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"width","160px"],["mat-button","","color","primary","aria-label","Edit Vendor",3,"disabled","click"],["mat-button","","color","primary","aria-label","Remove Vendor",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(e,t){1&e&&(o.Yb(0,"div",0),o.Yb(1,"div",1),o.Yb(2,"button",2),o.gc("click",(function(){return t.addUser()})),o.Yb(3,"mat-icon"),o.Gc(4,"add"),o.Xb(),o.Gc(5," Add New Vendor "),o.Xb(),o.Xb(),o.Yb(6,"div",3),o.Yb(7,"mat-form-field"),o.Yb(8,"input",4,5),o.gc("keyup",(function(e){return t.applyFilter(e)})),o.Xb(),o.Xb(),o.Xb(),o.Xb(),o.Yb(10,"div",6),o.Yb(11,"table",7),o.Wb(12,8),o.Ec(13,$,2,0,"th",9),o.Ec(14,A,2,1,"td",10),o.Vb(),o.Wb(15,11),o.Ec(16,W,2,0,"th",9),o.Ec(17,H,2,1,"td",10),o.Vb(),o.Wb(18,12),o.Ec(19,J,2,0,"th",9),o.Ec(20,Z,2,1,"td",10),o.Vb(),o.Wb(21,13),o.Ec(22,K,2,0,"th",9),o.Ec(23,L,2,1,"td",10),o.Vb(),o.Wb(24,14),o.Ec(25,Q,2,0,"th",9),o.Ec(26,ee,2,1,"td",10),o.Vb(),o.Wb(27,15),o.Ec(28,te,2,0,"th",16),o.Ec(29,re,9,2,"td",10),o.Vb(),o.Ec(30,ie,1,0,"tr",17),o.Ec(31,oe,1,3,"tr",18),o.Xb(),o.Xb(),o.Yb(32,"mat-paginator",19),o.gc("page",(function(e){return t.pageEvent=e})),o.Xb()),2&e&&(o.Gb(11),o.qc("dataSource",t.dataSource),o.Gb(19),o.qc("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),o.Gb(1),o.qc("matRowDefColumns",t.displayedColumns),o.Gb(1),o.qc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[T.b,V.a,G.b,E.a,z.j,z.c,z.e,z.b,z.g,z.i,n.a,z.d,z.a,z.f,z.h,i.k],styles:[""]}),e})();function ne(e,t){1&e&&o.Tb(0,"app-list-admin-user")}const ce=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Mb({type:e,selectors:[["app-user-management"]],decls:3,vars:0,consts:[["mat-align-tabs","start"],["label","Vendor"],["matTabContent",""]],template:function(e,t){1&e&&(o.Yb(0,"mat-tab-group",0),o.Yb(1,"mat-tab",1),o.Ec(2,ne,1,0,"ng-template",2),o.Xb(),o.Xb())},directives:[s.c,s.a,s.b,se],styles:[""]}),e})()}];let le=(()=>{class e{}return e.\u0275mod=o.Qb({type:e}),e.\u0275inj=o.Pb({factory:function(t){return new(t||e)},imports:[[a.e.forChild(ce)],a.e]}),e})();var de=r("PCNd");let be=(()=>{class e{}return e.\u0275mod=o.Qb({type:e}),e.\u0275inj=o.Pb({factory:function(t){return new(t||e)},imports:[[i.c,le,de.a.forRoot()]]}),e})()}}]);